<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="utf-8">
	<title></title>
	<!--load links/scripts below (i.e. jquery, bootstrap, javascripts-->
	<link rel="stylesheet" href="css/main.css">
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.2/jquery.min.js"></script>
</head>
<body>
	<script src="javascript/main.js"></script>
	<script src="javascript/basketball.js"></script>
	<canvas id="ballArea" width=1270px height=800px></canvas>
	<!-- <canvas id="hoopArea" width=1270px height=800px></canvas> -->
	<script>
	"use strict"

		var newGame = new Game("ballArea");
		var canvas = $('#ballArea')
		
		//create instances of objects on page (ball and hoop pieces)
		var newBall = new Ball(100,650);
		var newHoop = new Hoop(1200,250,1200,800)
		var newScore = new Score();
		var newAngle = new AngleClass();

		//add instances to be rendered
		newGame.addEntity(newBall);
		newGame.addEntity(newHoop);
		newGame.addEntity(newScore);
		newGame.addEntity(newAngle);

		//render the game (aka draw the canvas) at a rate of 90fps
		var gameInterval = setInterval(function(){
			newGame.render()
		}, 1000/90)

		// determine shot power
		var theKeyIsDown = false;
		//animate angle selector,
		setInterval(function(){
			newAngle.change(1,1);
		}, 60)

		// angleVelocity = {newAngle.y : [xVel, yVel]}
		// this object of keys and values will determine the velocity of the ball
		// depending on which y-coordinate the user releases on
		var angleVelocity = {'530': [12,-34],
							'531': [12,-34],
							'532': [12,-34],
							'533': [12,-34],
							'534': [12,-33],
							'535': [12,-33],
							'536': [13,-33],
							'537': [13,-32],
							'538': [13,-32],
							'539': [14,-32],
							'540': [14,-31],
							'541': [14,-31],
							'542': [15,-31],
							'543': [15,-30],
							'544': [15,-30],
							'545': [16,-30],
							'546': [16,-29],
							'547': [16,-29],
							'548': [17,-29],
							'549': [17,-28],
							'550': [17,-28],
							'551': [18,-28],
							'552': [18,-27],
							'553': [18,-27],
							'554': [19,-27],
							'555': [19,-26],
							'556': [19,-26],
							'557': [20,-26],
							'558': [20,-25],
							'559': [20,-25],
							'560': [21,-24],
							'561': [21,-24]}
		
		//event listener to shoot the ball
		var startTime
		var endTime
		$('body').on('keydown', function(event){
			if (event.keyCode === 83 && theKeyIsDown === false){
				startTime = event.timeStamp;
				theKeyIsDown = true
			}
		})
		$('body').on('keyup', function(event){
			if (event.keyCode === 83 && theKeyIsDown === true){
				endTime = event.timeStamp
				var duration = (endTime - startTime)/300
				if(newBall.x == 100 && newBall.y == 650) {
					// newBall.shot(1, -34);
					newBall.shot((duration+angleVelocity[newAngle.y][0]), angleVelocity[newAngle.y][1]);
				}
				theKeyIsDown = false
				// shotPower['startTime'] = 0
				// shotPower['endTime'] = 0
			}
		})
	</script>
</body>
</html>